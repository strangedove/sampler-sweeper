# Sampler Sweeper configuration
# Copy this file to sweep_config.yaml and edit as needed.
# Usage: uv run optuna_parameter_sweep.py --config sweep_config.yaml

api:
  base_url: "https://poly-wife-replacement-removal.trycloudflare.com/v1"
  model: ""          # empty = auto-detect from server
  api_key: "not-needed"
  max_tokens: 512

sweep:
  max_trials: 100
  n_jobs: 1
  study_name: "llm_parameter_optimization"
  top_n: 10              # number of top trials in the readable .md report
  label: ""              # optional label for output filenames (overrides model name)

# Each parameter: name: [min, max]
# Type is auto-detected: both bounds are int -> int, otherwise float.
# You can force a type with a third element: [0, 100, "int"]
parameters:
  temperature: [0.1, 2.0]
  min_p: [0.0, 0.3]
  top_k: [0, 100]
  adaptive_target: [0.3, 0.7]
  adaptive_decay: [0.5, 0.9]

# Prompt pool configuration
# If omitted entirely: uses all 8 built-in prompts in "sample" mode (K=3).
# If the old `prompt:` key is present (without `prompts:`), it's treated as
# a single-prompt pool in "all" mode (backward compatible).
#
# Modes:
#   "sample" - Each trial evaluates K randomly-selected prompts (default)
#   "all"    - Every prompt evaluated every trial (expensive, cleanest signal)
#   "random" - Single random prompt per trial (fastest, noisiest)
#
# Built-in prompt IDs:
#   continuation_default   - Raw text story continuation (Dagna radio tower)
#   instruct_writing_1     - Detective/greenhouse scene
#   instruct_writing_2     - Lighthouse keeper radio transmission
#   character_roleplay_1   - Marcus the merchant (fantasy RP)
#   character_roleplay_2   - Sera the retired assassin (tavern RP)
#   interactive_fiction_1  - Abandoned subway station
#   interactive_fiction_2  - Post-apocalyptic pharmacy (multi-turn)
#   general_assistant_6    - "Abvalid" creative word definition
prompts:
  mode: "sample"
  samples_per_trial: 3
  # pool: list of built-in prompt IDs to include (omit to use all 8)
  # pool:
  #   - "continuation_default"
  #   - "instruct_writing_1"
  #   - "instruct_writing_2"
  #   - "character_roleplay_1"
  #   - "character_roleplay_2"
  #   - "interactive_fiction_1"
  #   - "interactive_fiction_2"
  #   - "general_assistant_6"

  # Optional: add custom prompts alongside built-in ones
  # custom:
  #   - id: "my_chat_prompt"
  #     category: "Custom RP"
  #     messages:
  #       - role: "system"
  #         content: "You are a pirate captain."
  #       - role: "user"
  #         content: "Tell me about your ship."
  #   - id: "my_continuation"
  #     category: "Custom"
  #     text: "The rain fell softly on the old wooden dock..."
